---
const stats = [
  {
    icon: `<svg class='w-10 h-10 mb-4' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' viewBox='0 0 24 24'><rect x='3' y='7' width='18' height='13' rx='2'/><path d='M6 7V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v3'/></svg>`,
    label: "Años de Experiencia",
    value: "15+"
  },
  {
    icon: `<svg class='w-10 h-10 mb-4' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' viewBox='0 0 24 24'><path d='M17 21v-2a4 4 0 0 0-8 0v2'/><circle cx='12' cy='7' r='4'/><path d='M22 21v-2a4 4 0 0 0-3-3.87'/><path d='M6 17.13A4 4 0 0 0 3 21v2'/></svg>`,
    label: "Clientes Diarios",
    value: "1000+"
  },
  {
    icon: `<svg class='w-10 h-10 mb-4' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' viewBox='0 0 24 24'><circle cx='12' cy='8' r='7'/><polyline points='8.21 13.89 7.25 21 12 17.77 16.75 21 15.79 13.88'/></svg>`,
    label: "Empresas con convenio activo",
    value: "50+"
  },
  {
    icon: `<svg fill="currentColor" class='w-10 h-10 mb-4' version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 511.999 511.999" xml:space="preserve">
  <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
  <g id="SVGRepo_iconCarrier">
    <g>
      <g>
        <path d="M256.747,86.809C149.033,86.809,61.4,174.442,61.4,282.156c0,107.715,87.633,195.348,195.347,195.348 c107.715,0,195.347-87.633,195.347-195.348C452.094,174.441,364.462,86.809,256.747,86.809z M256.747,462.295 c-99.328,0-180.138-80.81-180.138-180.139s80.81-180.138,180.138-180.138c99.329,0,180.138,80.809,180.138,180.138 S356.076,462.295,256.747,462.295z"></path>
      </g>
    </g>
    <g>
      <g>
        <path d="M256.748,155.943c-69.594,0-126.214,56.619-126.214,126.213c0,11.232,1.478,22.375,4.392,33.119l14.678-3.983 c-2.564-9.445-3.863-19.249-3.863-29.137c0-61.208,49.797-111.004,111.005-111.004c17.825,0,34.844,4.093,50.584,12.167 l6.941-13.534C296.364,160.6,277.01,155.943,256.748,155.943z"></path>
      </g>
    </g>
    <g>
      <g>
        <path d="M156.761,330.436l-13.691,6.624c7.979,16.492,19.726,31.348,33.97,42.961l9.611-11.787 C174.116,358.013,163.78,344.943,156.761,330.436z"></path>
      </g>
    </g>
    <g>
      <g>
        <path d="M333.721,182.124l-9.282,12.046c27.526,21.212,43.314,53.281,43.314,87.984c0,61.208-49.797,111.005-111.005,111.005 c-21.791,0-42.88-6.309-60.991-18.241l-8.368,12.699c20.602,13.575,44.585,20.751,69.359,20.751 c69.595,0,126.214-56.619,126.214-126.214C382.961,242.698,365.013,206.238,333.721,182.124z"></path>
      </g>
    </g>
    <g>
      <g>
        <path d="M63.945,48.058v88.065H47.181V48.058H31.972v88.065H15.209V48.058H0v88.065v13.111v2.098h0.057 c0.96,18.283,14.386,33.312,31.916,36.738v281.83h15.209V188.07c17.529-3.427,30.955-18.455,31.916-36.739h0.057v-2.098v-13.111 V48.058H63.945z M39.577,173.601c-12.73,0-23.211-9.813-24.278-22.27h48.557C62.787,163.788,52.306,173.601,39.577,173.601z"></path>
      </g>
    </g>
    <g>
      <g>
        <path d="M499.327,42.243c-22.486,13.731-36.456,38.628-36.456,64.975V273.63h33.919v196.269h15.209v-196.27v-92.423V34.496 L499.327,42.243z M496.791,181.205v77.215h-18.711V107.217c0-16.624,6.948-32.525,18.711-43.896V181.205z"></path>
      </g>
    </g>
  </g>
</svg>`,
    label: "Platos Mensuales",
    value: "15K+"
  }
];
---

<section class="relative bg-gradient-to-br from-[#F8F6F3] to-white py-20 overflow-hidden">
  <!-- Patrón decorativo de fondo -->
  <div class="absolute inset-0 opacity-[0.02]">
    <div class="absolute inset-0" style="background-image: radial-gradient(circle at 2px 2px, #D4AF37 1px, transparent 0); background-size: 30px 30px;"></div>
  </div>

  <!-- Decoración superior -->
  <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent"></div>

  <div class="container mx-auto px-4 relative z-10">
    <!-- Header de la sección -->
    <div class="text-center mb-16">
      <div class="inline-flex items-center gap-2 px-6 py-3 bg-white border border-gray-200 rounded-full text-gray-600 text-sm font-medium mb-4 shadow-sm">
        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
        Nuestra trayectoria en números
      </div>
      <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
        Experiencia que 
        <span class="bg-gradient-to-r from-[#D4AF37] to-[#B8941F] bg-clip-text text-transparent">respalda</span>
      </h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">
        Más de una década sirviendo excelencia gastronómica
      </p>
    </div>

    <!-- Stats Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8 max-w-7xl mx-auto" id="stats-grid">
      {stats.map((stat, index) => (
        <div class="group relative">
          <!-- Card -->
          <div class="relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-500 border border-gray-100 overflow-hidden h-full">
            <!-- Gradiente decorativo en hover -->
            <div class="absolute inset-0 bg-gradient-to-br from-[#D4AF37]/5 to-[#B8941F]/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            
            <!-- Contenido -->
            <div class="relative z-10 flex flex-col items-center text-center">
              <!-- Icono -->
              <div class="w-20 h-20 bg-gradient-to-br from-[#D4AF37]/10 to-[#B8941F]/10 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500">
                <span class="text-[#D4AF37]" set:html={stat.icon}></span>
              </div>
              
              <!-- Número -->
              <div class="text-5xl md:text-6xl font-bold mb-3 stat-value bg-gradient-to-br from-[#D4AF37] via-[#B8941F] to-[#D4AF37] bg-clip-text text-transparent" data-target={stat.value}>
                0
              </div>
              
              <!-- Label -->
              <div class="text-base font-medium text-gray-600 group-hover:text-gray-800 transition-colors">
                {stat.label}
              </div>
              
              <!-- Barra decorativa -->
              <div class="w-16 h-1 bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent mt-4 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            </div>

          </div>
        </div>
      ))}
    </div>
    
    <!-- Encabezado -->
    <div class="text-center ">
      <div class="inline-flex items-center gap-2 px-6 py-3 bg-white border border-gray-200 rounded-full text-gray-600 text-[1rem] md:text-xl font-medium  shadow-sm md:mt-20 mt-10">
        <svg width="40" height="40" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
        Nuestros clientes
      </div>
      <!-- <p class="text-lg text-gray-600 max-w-2xl mx-auto">
        Más de 50 empresas líderes de la región
      </p> -->
    </div>

    <!-- Botón a la sección de clientes -->
    <!-- <div class="text-center mt-8">
      <a href="/servicios" class="inline-block px-8 py-3 bg-[#D4AF37] text-white font-semibold rounded-full shadow-md hover:bg-[#B8941F] transition-colors">
        Ver nuestros servicios
      </a>
    </div> -->
  </div>

  <!-- Decoración inferior -->
  <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent"></div>
</section>

<script>
  function animateValue(element: HTMLElement, start: number, end: number, duration: number, suffix: string = '') {
    const startTimestamp = performance.now();
    
    const step = (timestamp: number) => {
      const progress = Math.min((timestamp - startTimestamp) / duration, 1);
      const easeOutQuart = 1 - Math.pow(1 - progress, 4);
      const current = Math.floor(easeOutQuart * (end - start) + start);
      
      element.textContent = current.toLocaleString() + suffix;
      
      if (progress < 1) {
        requestAnimationFrame(step);
      } else {
        element.textContent = end.toLocaleString() + suffix;
      }
    };
    
    requestAnimationFrame(step);
  }

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const statElements = entry.target.querySelectorAll('.stat-value');
        
        statElements.forEach((element) => {
          const target = (element as HTMLElement).getAttribute('data-target');
          if (target) {
            const match = target.match(/^(\d+)(.*)$/);
            if (match) {
              const num = parseInt(match[1]);
              const suffix = match[2];
              animateValue(element as HTMLElement, 0, num, 2000, suffix);
            }
          }
        });
        
        observer.unobserve(entry.target);
      }
    });
  }, {
    threshold: 0.3
  });

  const statsGrid = document.getElementById('stats-grid');
  if (statsGrid) {
    observer.observe(statsGrid);
  }
</script>