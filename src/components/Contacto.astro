---

---

<section id="contacto" class="relative py-20 bg-gradient-to-br from-[#F8F6F3] to-white overflow-hidden">
  <!-- Decoración superior -->
  <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent"></div>

  <!-- Patrón decorativo de fondo -->
  <div class="absolute inset-0 opacity-[0.02]">
    <div class="absolute inset-0" style="background-image: radial-gradient(circle at 2px 2px, #D4AF37 1px, transparent 0); background-size: 30px 30px;"></div>
  </div>

  <div class="container mx-auto px-4 relative z-10 pt-10">
    <!-- Header de la sección -->
    <div class="text-center mb-16">
      <div class="inline-flex items-center gap-2 px-6 py-3 bg-white border border-gray-200 rounded-full text-gray-600 text-sm font-medium mb-4 shadow-sm">
        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        Ponte en contacto
      </div>
      <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
        ¿Tienes alguna 
        <span class="bg-gradient-to-r from-[#D4AF37] to-[#B8941F] bg-clip-text text-transparent">pregunta?</span>
      </h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">
        Nos encantaría saber de ti. Completa el formulario y nos pondremos en contacto lo antes posible.
      </p>
    </div>

    <div class="max-w-4xl mx-auto">
      <div class="mb-12">
        <!-- Formulario - Derecha -->
        <div class="md:col-span-2">
          <form id="contactForm" class="bg-white rounded-2xl shadow-lg p-8 border border-gray-100">
            <div id="contact-status" style="display:none;" class="mb-4 p-3 rounded-lg text-center font-medium"></div>
            <div class="space-y-5">
              <!-- Nombre -->
              <div class="group">
                <label for="name" class="block text-sm font-semibold text-gray-800 mb-2">Nombre completo</label>
                <input 
                  type="text" 
                  id="name" 
                  name="name" 
                  required
                  class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg focus:bg-white focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 transition-all duration-300 outline-none"
                  placeholder="Tu nombre"
                />
              </div>

              <!-- Email -->
              <div class="group">
                <label for="email" class="block text-sm font-semibold text-gray-800 mb-2">Correo electrónico</label>
                <input 
                  type="email" 
                  id="email" 
                  name="email" 
                  required
                  class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg focus:bg-white focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 transition-all duration-300 outline-none"
                  placeholder="tu@email.com"
                />
              </div>

              <!-- Teléfono -->
              <div class="group">
                <label for="phone" class="block text-sm font-semibold text-gray-800 mb-2">Teléfono</label>
                <input 
                  type="tel" 
                  id="phone" 
                  name="phone" 
                  class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg focus:bg-white focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 transition-all duration-300 outline-none"
                  placeholder="+56 9 1234 5678"
                />
              </div>

              <!-- Asunto -->
              <div class="group">
                <label for="subject" class="block text-sm font-semibold text-gray-800 mb-2">Asunto</label>
                <select 
                  id="subject" 
                  name="subject" 
                  required
                  class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg focus:bg-white focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 transition-all duration-300 outline-none"
                >
                  <option value="">Selecciona un asunto</option>
                  <option value="servicios">Información sobre servicios</option>
                  <option value="cotizacion">Solicitar cotización</option>
                  <option value="evento">Planificación de evento</option>
                  <option value="otro">Otro</option>
                </select>
              </div>

              <!-- Mensaje -->
              <div class="group">
                <div class="flex items-center justify-between mb-2">
                  <label for="message" class="block text-sm font-semibold text-gray-800">Mensaje</label>
                  <span class="text-xs text-gray-600">
                    <span id="charCount">0</span>/500
                  </span>
                </div>
                <textarea 
                  id="message" 
                  name="message" 
                  required
                  rows="5"
                  maxlength="500"
                  class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-lg focus:bg-white focus:border-[#D4AF37] focus:ring-2 focus:ring-[#D4AF37]/20 transition-all duration-300 outline-none resize-none"
                  placeholder="Cuéntanos cómo podemos ayudarte..."
                ></textarea>
              </div>

              <!-- Checkbox -->
              <div class="flex items-start gap-3">
                <input 
                  type="checkbox" 
                  id="terms" 
                  name="terms" 
                  required
                  class="w-5 h-5 mt-1 accent-[#D4AF37] cursor-pointer rounded"
                />
                <label for="terms" class="text-sm text-gray-600 cursor-pointer">
                  Acepto la <a href="#" class="text-[#D4AF37] hover:text-[#B8941F] font-semibold">política de privacidad</a> y autorizo el envío de mi información
                </label>
              </div>

              <!-- Botón enviar -->
              <button 
                type="submit"
                class="w-full py-3 px-6 bg-gradient-to-r from-[#D4AF37] to-[#B8941F] text-white font-bold rounded-lg hover:shadow-lg hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2"
              >
                <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/></svg>
                Enviar mensaje
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Decoración inferior -->
      <div class="flex justify-center">
        <div class="flex items-center gap-4">
          <div class="w-20 h-1 bg-gradient-to-r from-transparent to-[#D4AF37]"></div>
          <div class="w-3 h-3 rounded-full bg-[#D4AF37]"></div>
          <div class="w-3 h-3 rounded-full bg-[#B8941F]"></div>
          <div class="w-3 h-3 rounded-full bg-[#F4A261]"></div>
          <div class="w-20 h-1 bg-gradient-to-l from-transparent to-[#D4AF37]"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Decoración inferior -->
  <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-[#D4AF37] to-transparent"></div>
</section>

<script is:inline>
  (() => {
    const form = document.getElementById('contactForm');
    const messageInput = document.getElementById('message');
    const charCount = document.getElementById('charCount');
    const statusDiv = document.getElementById('contact-status');

    // Contador de caracteres
    if (messageInput && charCount) {
      messageInput.addEventListener('input', () => {
        charCount.textContent = String(messageInput.value.length);
      });
    }

    const showStatus = (type, text) => {
      if (!statusDiv) {
        // eslint-disable-next-line no-alert
        alert(text);
        return;
      }
      statusDiv.style.display = 'block';
      statusDiv.textContent = text;
      if (type === 'error') {
        statusDiv.className = 'mb-4 p-3 rounded-lg text-center font-medium bg-red-50 text-red-700 border border-red-200';
      } else if (type === 'loading') {
        statusDiv.className = 'mb-4 p-3 rounded-lg text-center font-medium bg-blue-50 text-blue-700 border border-blue-200';
      } else {
        statusDiv.className = 'mb-4 p-3 rounded-lg text-center font-medium bg-green-50 text-green-700 border border-green-200';
      }
    };

    if (form) {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const phoneInput = document.getElementById('phone');
        const subjectInput = document.getElementById('subject');
        const messageArea = document.getElementById('message');

        const name = nameInput?.value.trim() || '';
        const email = emailInput?.value.trim() || '';
        const phone = phoneInput?.value.trim() || '';
        const subject = subjectInput?.value.trim() || '';
        const message = messageArea?.value.trim() || '';

        if (!name || !email || !subject || !message) {
          showStatus('error', 'Por favor completa todos los campos requeridos');
          return;
        }

        if (message.length > 500) {
          showStatus('error', 'El mensaje no puede exceder 500 caracteres');
          return;
        }

        showStatus('loading', 'Enviando mensaje...');

        try {
          const res = await fetch('/api/enviar-contacto', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ name, email, phone, subject, message })
          });

          const data = await res.json();
          if (res.ok && data.success) {
            showStatus('success', '¡Gracias! Tu mensaje fue enviado correctamente.');
            form.reset();
            if (charCount) {
              charCount.textContent = '0';
            }
          } else {
            showStatus('error', data?.message || 'Error al enviar el mensaje');
          }
        } catch (err) {
          // eslint-disable-next-line no-console
          console.error('Error enviando contacto:', err);
          showStatus('error', 'Error del servidor. Intenta más tarde.');
        }
      });
    }
  })();
</script>
