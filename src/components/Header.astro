---
const navItems = [
  { label: "Inicio", href: "/" },
  { label: "Quienes Somos", href: "sobre-nosotros" },
  { label: "Servicios", href: "servicios" },
  { label: "Nuestros Locales", href: "ubicaciones" },
  {label: "Galeria", href: "galeria" },
];
---

<header id="main-header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-white/98 backdrop-blur-md shadow-lg border-b border-gray-200">
  <div class="container mx-auto px-4 lg:px-8">
    <div class="flex items-center justify-between h-20">
      <a href="/" class="relative h-40 w-auto transition-all duration-300 hover:scale-105 block">
        <img
          src="/logos/LOGO_MANTAGUA.webp"
          alt="Mantagua GastronomÃ­a"
          class="object-contain w-full h-full drop-shadow-lg"
          loading="eager"
        />
      </a>
      <nav class="hidden md:flex items-center gap-8">
        {navItems.map(item => (
          <a href={item.href} class="text-sm font-medium text-gray-800 hover:text-[#D4AF37] transition-all duration-300 relative group">
            {item.label}
            <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#D4AF37] transition-all duration-300 group-hover:w-full"></span>
          </a>
        ))}
        <div class="relative">
          <button id="contacto-btn" onclick="openContactoDropdown(event)" class="px-6 py-2.5 bg-gradient-to-r from-[#D4AF37] to-[#B8941F] text-white rounded-full font-medium hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer border-none" style="background-image: linear-gradient(to right, #D4AF37, #B8941F);">
            Contactanos
          </button>
          <!-- Dropdown Desktop -->
          <div id="contacto-dropdown" class="absolute top-full right-0 mt-2 w-56 bg-white rounded-xl shadow-2xl p-3 hidden z-40" style="display:none;">
            <!-- OpciÃ³n Conversemos -->
            <a 
              href="/contacto" 
              class="block w-full px-4 py-3 bg-gradient-to-r from-[#D4AF37] to-[#B8941F] text-white rounded-lg font-semibold hover:shadow-lg transition-all duration-300 text-center mb-3"
              onclick="closeContactoDropdown()"
            >
              <span class="text-base">ðŸ’¬ Conversemos</span>
              <p class="text-xs opacity-90 mt-1">EnvÃ­anos tus consultas</p>
            </a>
            
            <!-- OpciÃ³n Trabajemos Juntos -->
            <a 
              href="/trabaja" 
              class="block w-full px-4 py-3 bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-lg font-semibold hover:shadow-lg transition-all duration-300 text-center"
              onclick="closeContactoDropdown()"
            >
              <span class="text-base">ðŸš€ Trabajemos Juntos</span>
              <p class="text-xs opacity-90 mt-1">Ãšnete a nuestro equipo</p>
            </a>
          </div>
        </div>
      </nav>
      <button id="menu-btn" class="md:hidden p-2 text-gray-800 hover:text-[#D4AF37] transition-all duration-300" aria-label="Toggle menu" style="background:none;border:none;">
        <span id="menu-icon">
          <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
        </span>
        <span id="close-icon" style="display:none;">
          <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </span>
      </button>
    </div>
 
    <nav id="mobile-nav" class="md:hidden py-4 border-t border-gray-200 bg-white animate-fade-in" style="display:none;">
      {navItems.map(item => (
        <a href={item.href} class="block py-3 text-gray-800 hover:text-[#D4AF37] transition-all duration-300 hover:translate-x-2" onclick="closeMobileMenu()">{item.label}</a>
      ))}
      <button id="contacto-btn-mobile" onclick="openContactoDropdownMobile(event); return false;" class="block w-full mt-4 px-6 py-2.5 bg-gradient-to-r from-[#D4AF37] to-[#B8941F] text-white rounded-full font-medium text-center hover:shadow-lg transition-all duration-300 border-none cursor-pointer">ContÃ¡ctanos</button>
      
      <!-- Incluir el dropdown mobile aquÃ­ -->
      <div id="contacto-dropdown-mobile" style="display:none;" class="mt-3 space-y-3">
        <a 
          href="/contacto" 
          class="block w-full px-4 py-3 bg-gradient-to-r from-[#D4AF37] to-[#B8941F] text-white rounded-lg font-semibold hover:shadow-lg transition-all duration-300 text-center"
          onclick="closeContactoDropdownMobile(); closeMobileMenu();"
        >
          <span class="text-base">ðŸ’¬ Conversemos</span>
          <p class="text-xs opacity-90 mt-1">EnvÃ­anos tus consultas</p>
        </a>
        
        <a 
          href="/trabaja" 
          class="block w-full px-4 py-3 bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-lg font-semibold hover:shadow-lg transition-all duration-300 text-center"
          onclick="closeContactoDropdownMobile(); closeMobileMenu();"
        >
          <span class="text-base">ðŸš€ Trabajemos Juntos</span>
          <p class="text-xs opacity-90 mt-1">Ãšnete a nuestro equipo</p>
        </a>
      </div>
    </nav>
  </div>

  <style>
    @keyframes dropdown-in {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .animate-dropdown {
      animation: dropdown-in 0.2s ease-out;
    }
  </style>
  
  <script is:inline>
    // Funciones para el dropdown desktop
    window.openContactoDropdown = function(e) {
      if (e) e.stopPropagation();
      const dropdown = document.getElementById('contacto-dropdown');
      if (dropdown) {
        dropdown.style.display = 'block';
      }
    };
    
    window.closeContactoDropdown = function() {
      const dropdown = document.getElementById('contacto-dropdown');
      if (dropdown) {
        dropdown.style.display = 'none';
      }
    };

    // Funciones para el dropdown mobile
    window.openContactoDropdownMobile = function(e) {
      if (e) e.stopPropagation();
      const dropdownMobile = document.getElementById('contacto-dropdown-mobile');
      if (dropdownMobile) {
        dropdownMobile.style.display = dropdownMobile.style.display === 'block' ? 'none' : 'block';
      }
    };

    window.closeContactoDropdownMobile = function() {
      const dropdownMobile = document.getElementById('contacto-dropdown-mobile');
      if (dropdownMobile) {
        dropdownMobile.style.display = 'none';
      }
    };

    // Funciones para el menÃº mÃ³vil
    const header = document.getElementById('main-header');
    const menuBtn = document.getElementById('menu-btn');
    const mobileNav = document.getElementById('mobile-nav');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');
    let mobileOpen = false;

    menuBtn.addEventListener('click', () => {
      mobileOpen = !mobileOpen;
      mobileNav.style.display = mobileOpen ? 'block' : 'none';
      menuIcon.style.display = mobileOpen ? 'none' : 'inline';
      closeIcon.style.display = mobileOpen ? 'inline' : 'none';
    });

    window.closeMobileMenu = function() {
      mobileOpen = false;
      mobileNav.style.display = 'none';
      menuIcon.style.display = 'inline';
      closeIcon.style.display = 'none';
      
      // Cerrar el dropdown mobile tambiÃ©n
      const dropdownMobile = document.getElementById('contacto-dropdown-mobile');
      if (dropdownMobile) {
        dropdownMobile.style.display = 'none';
      }
    };

    // Cerrar dropdowns al hacer clic fuera
    document.addEventListener('click', function(e) {
      const dropdown = document.getElementById('contacto-dropdown');
      const dropdownMobile = document.getElementById('contacto-dropdown-mobile');
      const contactoBtn = document.getElementById('contacto-btn');
      const contactoBtnMobile = document.getElementById('contacto-btn-mobile');
      
      // Cerrar dropdown desktop
      if (dropdown && !dropdown.contains(e.target) && e.target !== contactoBtn && !contactoBtn?.contains(e.target)) {
        dropdown.style.display = 'none';
      }
      
      // Cerrar dropdown mobile
      if (dropdownMobile && !dropdownMobile.contains(e.target) && e.target !== contactoBtnMobile && !contactoBtnMobile?.contains(e.target)) {
        dropdownMobile.style.display = 'none';
      }
    });

    // Cerrar con tecla ESC
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeContactoDropdown();
        closeContactoDropdownMobile();
      }
    });
  </script>
</header>